<Window
	x:Class="VidCoder.View.WatcherWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:Resources="clr-namespace:VidCoder.Resources"
	xmlns:controls="clr-namespace:VidCoder.Controls"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="clr-namespace:VidCoder.View"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:viewModel="clr-namespace:VidCoder.ViewModel"
	Title="{x:Static Resources:WatcherRes.WatcherWindowTitle}"
	Width="600"
	Height="300"
	d:DataContext="{d:DesignInstance viewModel:WatcherWindowViewModel}"
	ShowInTaskbar="False"
	Style="{StaticResource NormalWindow}"
	WindowStyle="None"
	mc:Ignorable="d">
	<WindowChrome.WindowChrome>
		<WindowChrome CaptionHeight="30" ResizeBorderThickness="{x:Static SystemParameters.WindowResizeBorderThickness}" />
	</WindowChrome.WindowChrome>
	<Border Style="{StaticResource WindowMainPanelStyle}">
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition />
			</Grid.RowDefinitions>
			<controls:ToolWindowTitleBar
				Title="{x:Static Resources:WatcherRes.WatcherWindowTitle}"
				Grid.Row="0"
				IsActive="{Binding IsActive, RelativeSource={RelativeSource AncestorType=Window}}" />
			<StackPanel
				Grid.Row="1"
				Margin="16"
				VerticalAlignment="Center"
				Orientation="Vertical"
				Visibility="{Binding ServiceIsInstalled, Converter={StaticResource InverseVisibilityConverter}}">
				<TextBlock
					HorizontalAlignment="Center"
					Text="{x:Static Resources:WatcherRes.WatcherIntroText}"
					TextWrapping="Wrap" />
				<Button
					MinHeight="60"
					Margin="0 6 0 0"
					Command="{Binding InstallWatcherService}">
					<StackPanel Orientation="Horizontal">
						<Image
							Name="installUacShieldIcon"
							Width="30"
							Height="30" />
						<TextBlock
							Margin="6 0 0 0"
							VerticalAlignment="Center"
							FontSize="20"
							Text="{x:Static Resources:WatcherRes.InstallWatcherButton}" />
					</StackPanel>
				</Button>
			</StackPanel>

			<Grid Grid.Row="2" Visibility="{Binding ServiceIsInstalled, Converter={StaticResource VisibilityConverter}}">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition />
				</Grid.RowDefinitions>
				<!--  Button toolbar  -->
				<StackPanel Grid.Row="0" Orientation="Horizontal">
					<Button
						Padding="6"
						Command="{Binding OpenConfig}"
						Style="{StaticResource BorderlessButtonStyle}">
						<StackPanel Orientation="Horizontal">
							<Image
								Width="20"
								Height="20"
								Source="/Icons/folder.png" />
							<TextBlock
								Margin="6 0 0 0"
								VerticalAlignment="Center"
								Text="{x:Static Resources:WatcherRes.ConfigureFoldersButton}" />
						</StackPanel>
					</Button>
					<Button
						Padding="6"
						Command="{Binding UninstallWatcherService}"
						Style="{StaticResource BorderlessButtonStyle}">
						<StackPanel Orientation="Horizontal">
							<Image
								Name="uninstallUacShieldIcon"
								Width="20"
								Height="20" />
							<TextBlock
								Margin="6 0 0 0"
								VerticalAlignment="Center"
								Text="{x:Static Resources:WatcherRes.UninstallWatcherButton}" />
						</StackPanel>
					</Button>
				</StackPanel>

				<!--  Watched file grid  -->
				<Grid Grid.Row="1" />
			</Grid>
		</Grid>
	</Border>
</Window>
